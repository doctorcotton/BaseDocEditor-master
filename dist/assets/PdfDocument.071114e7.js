import{Font as v,StyleSheet as z,Text as n,Link as W,View as a,Image as j,Document as _,Page as $}from"./react-pdf.browser.cf1d6ae6.js";import{j as e,b as m,f as S,p as T,H as M,F as O,d as U}from"./index.f8b5ce3f.js";v.register({family:"Noto Sans SC",fonts:[{src:"/fonts/NotoSansSC-Regular.otf",fontWeight:400},{src:"/fonts/NotoSansSC-Bold.otf",fontWeight:700}]});const Y="Noto Sans SC",E=o=>o*2.834645669,t=z.create({page:{fontFamily:Y,fontSize:10,paddingTop:E(17),paddingBottom:E(17),paddingLeft:E(12),paddingRight:E(12),backgroundColor:"#ffffff"},content:{flex:1},text:{marginBottom:8,lineHeight:1.6},field:{marginBottom:8,flexDirection:"row",alignItems:"flex-start"},fieldLabel:{fontWeight:700,minWidth:80,marginRight:8},fieldValue:{flex:1},title:{fontSize:22,fontWeight:700,textAlign:"center",marginBottom:20},table:{marginBottom:16,width:"100%"},tableRow:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:"#ddd",borderBottomStyle:"solid"},tableHeaderRow:{flexDirection:"row",backgroundColor:"#f5f5f5",borderBottomWidth:1,borderBottomColor:"#333",borderBottomStyle:"solid"},tableCell:{padding:6,fontSize:11,borderRightWidth:1,borderRightColor:"#ddd",borderRightStyle:"solid",textAlign:"left",wordWrap:"break-word"},tableHeaderCell:{padding:6,fontSize:11,fontWeight:700,borderRightWidth:1,borderRightColor:"#333",borderRightStyle:"solid",textAlign:"center"},tableFirstCell:{textAlign:"left"},tableLastCell:{borderRightWidth:0},tableBorder:{borderWidth:1,borderColor:"#333",borderStyle:"solid"},loopArea:{marginBottom:16},loopItem:{marginBottom:12},link:{color:"#0066cc",textDecoration:"underline"},image:{marginBottom:12,maxWidth:"100%",objectFit:"contain"},emptyValue:{color:"#999"},printTimestamp:{position:"absolute",right:40,bottom:30,fontSize:10,color:"#666"}}),I=({element:o})=>{const s=o.config,d={normal:400,bold:700},f=typeof s.fontWeight=="string"?d[s.fontWeight]||400:s.fontWeight||400,r={...t.text,fontSize:s.fontSize||10,fontWeight:f,color:s.color||"#000000",textAlign:s.align||"left"};return e(n,{style:r,children:s.content||""})},D=({segments:o,style:s})=>e(n,{style:s,children:o.map((d,f)=>d.type==="link"&&d.url?e(W,{src:d.url,style:t.link,children:d.text},f):e(n,{children:d.text},f))}),R=({element:o,record:s,fields:d})=>{var g;const r=o.config.fieldId;if(!r)return e(n,{style:t.emptyValue,children:"\u672A\u9009\u62E9\u5B57\u6BB5"});const u=d.find(p=>p.id===r);if(!u)return m(n,{style:t.emptyValue,children:["\u5B57\u6BB5\u672A\u627E\u5230: ",r]});const l=s.fields[r],i=S(l,u.type);if(o.id==="title"){const p="fldL7m1ZTN",h=(g=s.fields)==null?void 0:g[p],C=d.find(w=>w.id===p),A=C?S(h,C.type):"",F=i||"\u672A\u547D\u540D\u8BB0\u5F55",x=A?`\u539F\u6599\u54C1\u8D28\u6807\u51C6-${A}`:"\u539F\u6599\u54C1\u8D28\u6807\u51C6",L=`${F} ${x}`;return e(n,{style:t.title,children:L})}const B=r==="fldNL9B304",b=!i||i.trim()==="",V=B?"\u65E0":"\u7A7A",c=T(l,u.type);return b?m(a,{style:t.field,children:[!B&&m(n,{style:t.fieldLabel,children:[u.name,"\uFF1A"]}),e(n,{style:t.emptyValue,children:V})]}):m(a,{style:t.field,children:[!B&&m(n,{style:t.fieldLabel,children:[u.name,"\uFF1A"]}),e(D,{segments:c,style:t.fieldValue})]})},P=({element:o,record:s,fields:d,loopRecords:f,loopFields:r})=>{const u=o.config,l=u.columns||[],i=u.rows||[],y=u.dataSource||"dynamic",B=u.showHeader!==!1;if(l.length===0)return e(n,{style:t.emptyValue,children:"\u8868\u683C\u672A\u914D\u7F6E\u5217"});const b=`${100/l.length}%`,V=(c,g,p)=>{if(c.type==="text")return m(n,{children:[c.labelPrefix||"",c.content||""]});if(c.type==="field"&&c.fieldId){const h=p.find(x=>x.id===c.fieldId);if(!h)return e(n,{style:t.emptyValue,children:"\u5B57\u6BB5\u672A\u627E\u5230"});const C=g.fields[c.fieldId],A=S(C,h.type);if(!A||A.trim()==="")return e(n,{style:t.emptyValue,children:"\u7A7A"});const F=T(C,h.type);return m(O,{children:[c.labelPrefix&&e(n,{children:c.labelPrefix}),e(D,{segments:F})]})}return e(n,{style:t.emptyValue,children:"-"})};return y==="static"&&i.length>0?m(a,{style:[t.table,t.tableBorder],children:[B&&e(a,{style:t.tableHeaderRow,children:l.map((c,g)=>e(a,{style:[t.tableHeaderCell,{width:b},...g===0?[t.tableFirstCell]:[],...g===l.length-1?[t.tableLastCell]:[]],children:e(n,{children:c.label})},c.id))}),i.map((c,g)=>e(a,{style:t.tableRow,children:l.map((p,h)=>{const C=c.cells.find(A=>A.columnId===p.id);return e(a,{style:[t.tableCell,{width:b},...h===0?[t.tableFirstCell]:[],...h===l.length-1?[t.tableLastCell]:[]],children:C?V(C,s,d):e(n,{children:"-"})},p.id)})},g))]}):y==="loop"&&f&&f.length>0&&r?m(a,{style:[t.table,t.tableBorder],children:[B&&e(a,{style:t.tableHeaderRow,children:l.map((c,g)=>e(a,{style:[t.tableHeaderCell,{width:b},...g===0?[t.tableFirstCell]:[],...g===l.length-1?[t.tableLastCell]:[]],children:e(n,{children:c.label})},c.id))}),f.map((c,g)=>e(a,{style:t.tableRow,children:l.map((p,h)=>{const C=p.fieldId;if(!C)return e(a,{style:[t.tableCell,{width:b},...h===0?[t.tableFirstCell]:[],...h===l.length-1?[t.tableLastCell]:[]],children:e(n,{children:"-"})},p.id);const A=r.find(w=>w.id===C);if(!A)return e(a,{style:[t.tableCell,{width:b},...h===0?[t.tableFirstCell]:[],...h===l.length-1?[t.tableLastCell]:[]],children:e(n,{style:t.emptyValue,children:"\u5B57\u6BB5\u672A\u627E\u5230"})},p.id);const F=c.fields[C],x=S(F,A.type);if(A.type===M.Checkbox){const w=F===!0||F===1;return e(a,{style:[t.tableCell,{width:b},...h===0?[t.tableFirstCell]:[],...h===l.length-1?[t.tableLastCell]:[]],children:e(n,{children:w?"\u2611":"\u2610"})},p.id)}if(!x||x.trim()==="")return e(a,{style:[t.tableCell,{width:b},...h===0?[t.tableFirstCell]:[],...h===l.length-1?[t.tableLastCell]:[]],children:e(n,{style:t.emptyValue,children:"\u7A7A"})},p.id);const L=T(F,A.type);return e(a,{style:[t.tableCell,{width:b},...h===0?[t.tableFirstCell]:[],...h===l.length-1?[t.tableLastCell]:[]],children:e(D,{segments:L})},p.id)})},c.recordId))]}):m(a,{style:[t.table,t.tableBorder],children:[B&&e(a,{style:t.tableHeaderRow,children:l.map((c,g)=>e(a,{style:[t.tableHeaderCell,{width:b},...g===0?[t.tableFirstCell]:[],...g===l.length-1?[t.tableLastCell]:[]],children:e(n,{children:c.label})},c.id))}),e(a,{style:t.tableRow,children:e(a,{style:t.tableCell,children:e(n,{style:t.emptyValue,children:"\u6682\u65E0\u6570\u636E"})})})]})},H=({element:o,record:s})=>{const f=o.config.fieldId;if(!f)return e(n,{style:t.emptyValue,children:"\u672A\u9009\u62E9\u9644\u4EF6\u5B57\u6BB5"});const r=s.fields[f],u=U(r);return u.length===0?e(n,{style:t.emptyValue,children:"\u65E0\u56FE\u7247"}):e(a,{children:u.map((l,i)=>e(j,{src:l,style:t.image},i))})},N=({element:o,record:s})=>{const d=o.config,f=d.fieldId;if(!f)return e(n,{style:t.emptyValue,children:"\u672A\u9009\u62E9\u5B57\u6BB5"});const r=s.fields[f],u=[];if(Array.isArray(r))r.forEach(l=>{if(typeof l=="object"&&l!==null){const i=l.link||l.url||"",y=l.text||l.name||i;i&&u.push({url:i,text:y})}else typeof l=="string"&&(l.startsWith("http://")||l.startsWith("https://"))&&u.push({url:l,text:l})});else if(typeof r=="object"&&r!==null){const l=r.link||r.url||"",i=r.text||r.name||l;l&&u.push({url:l,text:i})}else typeof r=="string"&&(r.startsWith("http://")||r.startsWith("https://"))&&u.push({url:r,text:r});if(u.length===0)return e(n,{style:t.emptyValue,children:"\u65E0\u94FE\u63A5"});if(u.length===1){const l=u[0],i=d.text||l.text||"\u94FE\u63A5";return e(W,{src:l.url,style:t.link,children:i})}return e(a,{children:u.map((l,i)=>e(a,{style:{marginBottom:4},children:m(W,{src:l.url,style:t.link,children:["\u2022 ",l.text||"\u94FE\u63A5"]})},i))})},Z=({element:o,record:s,fields:d,loopRecords:f,loopFields:r})=>{const l=o.config.template||[];return f.length===0?e(a,{style:t.loopArea,children:e(n,{style:t.emptyValue,children:"\u65E0\u5173\u8054\u8BB0\u5F55"})}):l.some(y=>y.type==="table"&&y.config.dataSource==="loop")?e(a,{style:t.loopArea,children:l.map(y=>k(y,s,d,f,r))}):e(a,{style:t.loopArea,children:f.map((y,B)=>e(a,{style:t.loopItem,children:l.map(b=>k(b,y,r,f,r))},y.recordId))})};function k(o,s,d,f,r){switch(o.type){case"text":return e(I,{element:o},o.id);case"field":return e(R,{element:o,record:s,fields:d},o.id);case"table":return e(P,{element:o,record:s,fields:d,loopRecords:f,loopFields:r},o.id);case"image":return e(H,{element:o,record:s,fields:d},o.id);case"link":return e(N,{element:o,record:s},o.id);default:return null}}const q=({template:o,record:s,fields:d,table:f,printTimestamp:r,loopDataCache:u=new Map})=>{const l=i=>{switch(i.type){case"text":return e(I,{element:i},i.id);case"field":return e(R,{element:i,record:s,fields:d},i.id);case"loop":{const y=u.get(i.id);return y?e(Z,{element:i,record:s,fields:d,loopRecords:y.records,loopFields:y.fields},i.id):e(a,{style:t.loopArea,children:e(n,{style:t.emptyValue,children:"\u5FAA\u73AF\u6570\u636E\u52A0\u8F7D\u5931\u8D25"})},i.id)}case"table":return e(P,{element:i,record:s,fields:d},i.id);case"image":return e(H,{element:i,record:s,fields:d},i.id);case"link":return e(N,{element:i,record:s},i.id);default:return null}};return e(_,{children:m($,{size:"A4",style:t.page,children:[e(a,{style:t.content,children:o.elements.length===0?e(n,{style:t.emptyValue,children:"\u6A21\u677F\u4E3A\u7A7A"}):o.elements.map(i=>l(i))}),r&&m(n,{style:t.printTimestamp,children:["\u6253\u5370\u65F6\u95F4\uFF1A",r]})]})})},K=q;export{K as PdfDocument};
